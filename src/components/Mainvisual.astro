<div id="mainvisual" class="mainvisual">
    <div id="mainvisual-bg" class="mainvisual-bg">
        <div class="mainvisual-bg__layer mainvisual-bg__layer--04" data-depth="2">
            <div class="mainvisual-bg__layer-image mainvisual-bg__layer-image--04"></div>
        </div>
        <div class="mainvisual-bg__layer mainvisual-bg__layer--03" data-depth="6">
            <div class="mainvisual-bg__layer-image mainvisual-bg__layer-image--03"></div>
        </div>
        <div class="mainvisual-bg__layer mainvisual-bg__layer--02" data-depth="9">
            <div class="mainvisual-bg__layer-image mainvisual-bg__layer-image--02"></div>
        </div>
        <div class="mainvisual-bg__layer mainvisual-bg__layer--01" data-depth="11">
            <div class="mainvisual-bg__layer-image mainvisual-bg__layer-image--01"></div>
        </div>
        <div class="mainvisual-bg__layer mainvisual-bg__layer--00" data-depth="16">
            <div class="mainvisual-bg__layer-image mainvisual-bg__layer-image--00"></div>
        </div>
        <div class="mainvisual-bg__layer mainvisual-bg__layer--copy" data-depth="2.5">
            <div class="mainvisual-bg__layer-image mainvisual-bg__layer-image-copy"></div>
        </div>
    </div>
    <div id="mainvisual__stalker" class="mainvisual__stalker"></div>
</div>
<style>
    .mainvisual {
        position: relative;
        height: 67.5vw;
        -webkit-mask: linear-gradient(to top, transparent 0%,12.5%,black 17.5%, black 100%);
        mask: linear-gradient(to top, transparent 0%,12.5%,black 17.5%, black 100%);
        content-visibility: auto;
        opacity: 0;
        transition: opacity 0.5s 0.375s;
    }
    :global(.is-load) .mainvisual {
        opacity: 1;
    }
    .mainvisual-bg {
        position: absolute;
        overflow: hidden;
        inset: -4.75%;
        z-index: 0;
        background: var(--color-white-secondary);
    }
    .mainvisual-bg::before {
        content: "";
        position: absolute;
        z-index: 2;
        inset: 0;
        background: url("/images/noise.png") center/50px repeat;
        animation: overlay-noise 5s 0s both normal infinite steps(15);
        mix-blend-mode: overlay;
        opacity: 0.6;
        will-change: background-position;
    }
    :global(.is-load) .mainvisual-bg__layer {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        will-change: transform;
        animation: mainvisual-bg-layer-show 1.25s 0.375s normal both 1 cubic-bezier(0,.77,.06,1);
        backface-visibility: hidden;
    }
    @keyframes overlay-noise {
        0% {
            background-position: 0 0;
        }
        100% {
            background-position: 100% 100%;
        }
    }
    @keyframes mainvisual-bg-layer-show {
        0% {
            translate: 0 calc(-280px * (var(--parallax) - 0.75));
        }
        100% {
            translate: 0 0;
        }
    }
    .mainvisual-bg__layer-image {
        inset: 0;
        position: absolute;
        animation:mainvisual-shake 15s 0s both infinite normal linear;
        background:center 32px/100% no-repeat;
        /* translate: 0 calc(var(--parallax-offset) * (var(--parallax) - 1.25) * -0.2); */
        will-change: translate;
    }
    .mainvisual-bg__layer-image {
        background-image:var(--background-image);
    }
    .mainvisual-bg__layer--00 {
        --parallax: 2.5;
        --background-image:url("/images/kv-00.webp");
    }
    .mainvisual-bg__layer--01 {
        --parallax: 2;
        --background-image:url("/images/kv-01.webp");
    }
    .mainvisual-bg__layer--02 {
        --parallax: 1.5;
        --background-image:url("/images/kv-02.webp");
    }
    .mainvisual-bg__layer--03 {
        --parallax: 1;
        --background-image:url("/images/kv-03.webp");
    }
    .mainvisual-bg__layer--04 {
        --parallax: 0.75;
        --background-image:url("/images/kv-04.webp");
    }
    .mainvisual-bg__layer--copy {
        --parallax: 1;
        --background-image:url("/images/kv-copy.svg");
    }
    .mainvisual__stalker {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        display: block;
        width: 1400px;
        height: 1400px;
        translate: -50% -50%;
        border-radius: 50%;
        background: url("/images/mouse-stoker.svg") center/contain no-repeat;
        mix-blend-mode: color-dodge;
        opacity: 0;
        transition-property: width, height, background-color, transform;
        transition-timing-function: linear;
        transition: opacity 0.5s 0.25s;
        z-index: 2;
        transition: opacity 0.5s;
    }
    .mainvisual__stalker.is-show {
        opacity: 0.85;
    }
    .mainvisual__stoker.is-visible {
        opacity: 0.75;
    }
    @keyframes mainvisual-shake {
        0% {transform: rotateZ(0deg) translate3d(0,calc(1% * var(--parallax)),0) rotateZ(0deg);}
        100% {transform: rotateZ(360deg) translate3d(0,calc(1% * var(--parallax)),0) rotateZ(-360deg);}
    }
</style>
<script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/parallax/3.1.0/parallax.min.js"></script>
<script is:inline>
    (function(){
        const body = document.querySelector("body");
        setTimeout(function(){
            body.classList.add("is-load");
        },50);
        let lastScrollY = 0;
        const mainvisual = document.getElementById('mainvisual-bg');
        window.onload = function() {
            if(!document.getElementById('mainvisual-bg')) return;
            const parallax = new Parallax( mainvisual, {
                scalarX: 0.375,
                scalarY: 0.2,
                frictionX: 0.1,
                frictionY: 0.2,
            });
        };
    }());
    class MouseStalker {
        constructor() {
            this.mainvisual = document.getElementById("mainvisual");
            this.stalker = document.getElementById("mainvisual__stalker");
            this.posX = 0;
            this.posY = 0;
            this._init();
        }
        _init() {
            this._on();
        }
        _on() {
            document.addEventListener("mousemove", this._move.bind(this));
        }
        _move(e) {
            this.posX = e.clientX - this.mainvisual.getBoundingClientRect().left;
            this.posY = e.clientY - this.mainvisual.getBoundingClientRect().top;
            this.stalker.classList.add("is-show");
            this.stalker.style.transform = `translate(${this.posX}px,${this.posY}px)`;
            this.stalker.classList.add("is-visible");
        }
    }
    new MouseStalker();
</script>